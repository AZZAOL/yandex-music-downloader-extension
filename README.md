# Yandex Music Downloader

**Yandex Music Downloader** — это расширение для браузера, которое добавляет кнопку для скачивания треков с сервиса Яндекс.Музыка. Оно работает на страницах `music.yandex.ru` и `music.yandex.kz`, позволяя сохранять музыку в формате MP3 с различными битрейтами (320, 192, 128 kbps), если они доступны. Если качество 320 kbps недоступно, расширение автоматически выберет следующий доступный битрейт (192 kbps, затем 128 kbps).

> **Внимание**: Расширение доступно только на русском языке. Все интерфейсы, сообщения и инструкции представлены исключительно на русском.

## Оглавление
- [Возможности](#возможности)
- [Требования](#требования)
- [Установка](#установка)
- [Использование](#использование)
- [Ограничения](#ограничения)
- [Устранение неполадок](#устранение-неполадок)
- [Контакты](#контакты)

## Возможности
- Работает с локальным сервером (Python Flask) для обработки запросов и скачивания треков.
- Добавляет кнопку скачивания рядом с каждым треком на сайте Яндекс.Музыки.

![image](https://github.com/user-attachments/assets/6daeb1f4-c42f-494f-967f-8c9094ca0e09)
- Требует токен Яндекс.Музыки, который можно получить через интерфейс расширения.

![image](https://github.com/user-attachments/assets/bc2541a8-149e-4ee7-8961-1a795e867420)

## Требования
- Желательно Google Chrome, тестировалось именно на нём
- Python 3.8+ для запуска локального сервера.
- Установленные зависимости Python (см. `requirements.txt`):
  - `flask`
  - `flask-cors`
  - `yandex-music`
  - `requests`

## Установка
1. **Склонируйте репозиторий**:
   ```bash
   git clone https://github.com/AZZAOL/yandex-music-downloader-extension.git
   cd yandex-music-downloader-extension
   ```

2. **Установите зависимости Python**:
   ```bash
   pip install -r requirements.txt
   ```

3. **Запустите локальный сервер**:
   ```bash
   python server.py
   ```
   Сервер будет работать на `http://localhost:5000`.

4. **Добавьте расширение в браузер**:
   - Откройте браузер и перейдите в раздел расширений (`chrome://extensions/`).
   - Включите **Режим разработчика** (переключатель в правом верхнем углу).
   - Нажмите **Загрузить распакованное расширение** и выберите папку репозитория, содержащую файл `manifest.json`.

5. **Получите токен Яндекс.Музыки**:
   - Кликните на иконку расширения в браузере, чтобы открыть всплывающее окно.
   - Нажмите **Получить токен** и токен автоматически подхватится если вы уже авторизованы.

## Использование
1. Перейдите на сайт Яндекс.Музыки (`music.yandex.ru` или `music.yandex.kz`).
2. Найдите трек, который хотите скачать.
3. Нажмите на кнопку с иконкой загрузки (стрелка вниз), которая появится рядом с названием трека.
4. Дождитесь уведомления о завершении загрузки. Трек будет сохранён в формате MP3 в папку загрузок.

## Ограничения
- Расширение работает только на русском языке.
- Требуется запущенный локальный сервер (`server.py`) на `http://localhost:5000`.
- Если у трека длинное название то кнопка загрузки не видна.
- Нельзя ввести токен вручную (На то и расчитано расширение, что вы получаете токен автоматически)

## Устранение неполадок
- **Кнопка скачивания не появляется**:
  - Убедитесь, что вы находитесь на странице `music.yandex.ru` или `music.yandex.kz`.
  - Перезагрузите страницу или переустановите расширение.
- **Ошибка "Токен не указан"**:
  - Откройте всплывающее окно расширения и получите токен. (Может быть такое что окошко ввода токена скрыто и токен не сохраняется, придётся держать окно ввода токена открытым)
  - Убедитесь, что токен сохранён в настройках.
- **Сервер не отвечает**:
  - Проверьте, что сервер запущен и порт `5000` не занят.
  - Перезапустите `server.py`.
- **Трек не скачивается**:
  - Убедитесь, что токен действителен.
  - Проверьте доступность трека в нужном битрейте.

## Контакты
Если у вас есть вопросы, предложения или вы нашли ошибку, создайте [issue](https://github.com/AZZAOL/yandex-music-downloader-extension/issues) в репозитории или свяжитесь с автором через GitHub.
